!function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,n){"use strict";var o={fontNo:"6",dpi:203};n.config=o},{}],2:[function(t){"use strict";t("./src/components/component"),t("./src/components/text"),t("./src/components/rect"),t("./src/components/ellipse"),t("./src/components/line"),t("./src/components/image"),t("./src/components/barcode")},{"./src/components/barcode":3,"./src/components/component":4,"./src/components/ellipse":5,"./src/components/image":6,"./src/components/line":7,"./src/components/rect":8,"./src/components/text":9}],3:[function(t,e,n){"use strict";var o=t("../../config").config;scene.Barcode.prototype._toZpl=function(t){var e=this.model,n=e.symbol,r=e.scale_w,i=void 0===r?1:r,s=e.showText,a=void 0===s?"Y":s,h=e.textAbove,c=void 0===h?"":h,u=this.labelingBounds,p=u.left,l=u.top,f=u.width,d=u.height,g=t?this.get("text"):this.text,b=this.orientation,m=[],v=2,M="R"==b||"B"==b?f:d;m.push(["^BY"+i,v,M]),m.push(["^FO"+p,l]),a&&"qrcode"!=n&&(M-=6*i+8);o.dpi;switch(n){case"code11":m.push(["^B1"+b,,M,a,c]);break;case"interleaved2of5":m.push(["^B2"+b,M,a,c]);break;case"code39":m.push(["^B3"+b,,M,a,c]);break;case"code49":m.push(["^B4"+b,M,a]);break;case"planet":m.push(["^B5"+b,M,a,c]);break;case"pdf417":m.push(["^B7"+b,M,,,,]);break;case"ean8":m.push(["^B8"+b,M,a,c]);break;case"upce":m.push(["^B9"+b,M,a,c]);break;case"code93":m.push(["^BA"+b,M,a,c]);break;case"codablock":m.push(["^BB"+b,M,,,,]);break;case"code128":m.push(["^BC"+b,M,a,c,,]);break;case"maxicode":m.push(["^BD"+b,,M,a,c]);break;case"ean13":m.push(["^BE"+b,M,a,c]);break;case"micropdf417":m.push(["^BF2",,]);break;case"industrial2of5":m.push(["^BI"+b,M,a,c]);break;case"standard2of5":m.push(["^BJ"+b,M,a,c]);break;case"ansicodabar":m.push(["^BK"+b,,M,a,c,,]);break;case"logmars":m.push(["^BL"+b,M,c]);break;case"msi":m.push(["^BM"+b,,M,a,c]);break;case"plessey":m.push(["^BP"+b,,M,a,c]);break;case"qrcode":m.push(["^BQ"+b,1,2]);break;case"upca":m.push(["^BU"+b,M,a,c]);break;case"datamatrix":m.push(["^BX"]);break;case"postal":m.push(["^BZ"+b,M,a,c])}m.push("qrcode"===n?["^FDQ","A"+g]:["^FD"+g]),m.push(["^FS"]);var y=m.map(function(t){return t.join(",")}).join("\n")+"\n";return y},n.Barcode=scene.Barcode},{"../../config":1}],4:[function(t,e,n){"use strict";function o(t){return"black"===t||"#000"===t||"#000000"===t}var r=t("../utils/to-grf"),i={NORMAL:"N",ROTATE_90:"R",INVERTED_180:"I",BOTTOM_UP_270:"B"},s=203;Object.defineProperty(scene.Component.prototype,"labelingRatio",{get:function(){var t=s/2.54/10,e=.1;return t*e}}),scene.Scene.prototype.toGRF=function(){var t=this.root.bounds,e=this.root.labelingRatio;return t.left=Math.round(t.left*e),t.top=Math.round(t.top*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e),r.getGrfCommand(t,this.toDataURL(void 0,void 0,t.width,t.height))},scene.Scene.prototype.toZpl=function(t,e){var n=this,o=Number(this.root.get("width"))/100;return new Promise(function(r,i){e?n.toGRF().then(function(t){r(["^XA","^PW"+Math.round(o/2.54*s)+"\n",t,"^XZ"].join("\n"))},function(t){i(t)}):n.root.toZpl(t).then(function(t){r(["^XA","^PW"+Math.round(o/2.54*s)+"\n",t,"^XZ"].join("\n"))},function(t){i(t)})})},scene.Component.prototype.toZpl=function(t){var e=this;return new Promise(function(n,o){try{n(e._toZpl(t))}catch(r){o(r)}})},scene.Container.prototype.toZpl=function(t){var e=this;return new Promise(function(n,o){var r=e.components.map(function(e){return e.toZpl(t)});Promise.all(r).then(function(t){n(t.join("\n"))},function(t){o(t)})})},Object.defineProperty(scene.Component.prototype,"lineColor",{get:function(){var t=this.model,e=t.strokeStyle,n=t.fillStyle;return o(e)||o(n)?"B":"W"}}),Object.defineProperty(scene.Component.prototype,"lineWidth",{get:function(){var t=this.model.lineWidth;return Math.round(t*this.labelingRatio)}}),Object.defineProperty(scene.Component.prototype,"borderThickness",{get:function(){var t=this.model,e=t.fillStyle,n=t.lineWidth,r=this.labelingBounds,i=r.width,s=r.height;return Math.round(o(e)?Math.min(i,s)/2:n*this.labelingRatio)}}),Object.defineProperty(scene.Component.prototype,"labelingTextBounds",{get:function(){var t=this.textBounds,e=t.left,n=t.top,o=t.width,r=t.height;r=this.fontSize;var i=this.transcoordS2T(e,n),s=this.transcoordS2T(e+o,n+r),e=Math.min(i.x,s.x)*this.labelingRatio,n=Math.min(i.y,s.y)*this.labelingRatio,o=Math.abs(s.x-i.x)*this.labelingRatio,r=Math.abs(s.y-i.y)*this.labelingRatio;return{left:Math.round(e),top:Math.round(n),width:Math.round(o),height:Math.round(r)}}}),Object.defineProperty(scene.Component.prototype,"labelingBounds",{get:function(){var t=this.bounds,e=t.left,n=t.top,o=t.width,r=t.height,i=this.transcoordS2T(e,n),s=this.transcoordS2T(e+o,n+r),e=Math.min(i.x,s.x)*this.labelingRatio,n=Math.min(i.y,s.y)*this.labelingRatio,o=Math.abs(s.x-i.x)*this.labelingRatio,r=Math.abs(s.y-i.y)*this.labelingRatio;return{left:Math.round(e),top:Math.round(n),width:Math.round(o),height:Math.round(r)}}}),Object.defineProperty(scene.Component.prototype,"absoluteRotation",{get:function(){for(var t=0,e=this;e;)t+=e.get("rotation")||0,e=e.parent;return t}}),Object.defineProperty(scene.Component.prototype,"orientation",{get:function(){var t=this.absoluteRotation%(2*Math.PI);return Math.PI*-.25<t&&t<=.25*Math.PI?i.NORMAL:.25*Math.PI<t&&t<=.75*Math.PI?i.ROTATE_90:.75*Math.PI<t&&t<=1.25*Math.PI||-1.25*Math.PI<t&&t<=Math.PI*-.75?i.INVERTED_180:Math.PI<1.25*t&&t<=1.75*Math.PI||Math.PI*-.75<t&&t<=Math.PI*-.25?i.BOTTOM_UP_270:void 0}}),n.Component=scene.Component},{"../utils/to-grf":11}],5:[function(t,e,n){"use strict";t("./text"),scene.Component.prototype.toZplForEllipse=function(t,e,n){var o=t.top,r=t.left,i=t.width,s=t.height,a=[];return a.push(["^FO"+r,o]),a.push(i===s?["^GC"+i,n,e]:["^GE"+i,s,n,e]),a.push(["^FS"]),a.map(function(t){return t.join(",")}).join("\n")+"\n"},scene.Ellipse.prototype._toZpl=function(t){var e=this.toZplForEllipse(this.labelingBounds,this.lineColor,this.borderThickness);return(t?this.get("text"):this.text)&&(e+=this.toZplForText(t)),e},n.Ellipse=scene.Ellipse},{"./text":9}],6:[function(t,e,n){"use strict";var o=t("../utils/to-grf");scene.ImageView.prototype.toZpl=function(){var t=this,e=this.model.src;return new Promise(function(n,r){o.getGrfCommand(t.labelingBounds,t.app.url(e)).then(function(t){n(t)},function(t){r(t)})})},n.Image=scene.ImageView},{"../utils/to-grf":11}],7:[function(t,e,n){"use strict";t("./rect"),t("./text"),scene.Component.prototype.toZplForLine=function(t,e,n,o){var r=t.left,i=t.top,s=t.width,a=t.height,h=[["^FO"+r,i],["^GD"+s,a,n,e,o],["^FS"]];return h.map(function(t){return t.join(",")}).join("\n")+"\n"},scene.Line.prototype._toZpl=function(t){var e,n=this.labelingBounds;if(n.width<.5||n.height<.5)0==width?(n.left-=this.borderThickness/2,n.width+=this.borderThickness/2):0==height&&(n.top-=this.borderThickness/2,n.height+=this.borderThickness/2),e=this.toZplForRect(n,this.lineColor,this.borderThickness,0);else{var o=this.model,r=o.x1,i=o.x2,s=o.y1,a=o.y2,h=this.transcoordS2T(r,s),c=this.transcoordS2T(i,a),u=(h.x-c.x)*(h.y-c.y)>0?"L":"R";e=this.toZplForLine(n,this.lineColor,this.lineWidth,u)}return(t?this.get("text"):this.text)&&(e+=this.toZplForText(t)),e},n.Line=scene.Line},{"./rect":8,"./text":9}],8:[function(t,e,n){"use strict";t("./text"),scene.Component.prototype.toZplForRect=function(t,e,n,o){var r=t.top,i=t.left,s=t.width,a=t.height,h=[["^FO"+i,r],["^GB"+s,a,n,e,Math.round(8*o/100)],["^FS"]];return h.map(function(t){return t.join(",")}).join("\n")+"\n"},scene.Rect.prototype._toZpl=function(t){var e=this.model.round,n=void 0===e?0:e,o=this.toZplForRect(this.labelingBounds,this.lineColor,this.borderThickness,n);return(t?this.get("text"):this.text)&&(o+=this.toZplForText(t)),o},n.Rect=scene.Rect},{"./text":9}],9:[function(t,e,n){"use strict";var o=t("../../config").config,r=100;scene.Component.prototype.toZplForText=function(t){var e=this.model,n=e.textWrap,i=e.textAlign,s=(e.textBaseline,this.labelingTextBounds),a=s.left,h=s.top,c=s.width,u=(s.height,this.orientation),p=Math.round((this.lineHeight-this.fontSize)*this.labelingRatio),l=t?this.get("text"):this.text,f=Math.round(this.fontSize*this.labelingRatio),d=Math.round(this.fontSize*this.labelingRatio),g=o.fontNo||"A";if(n){var b;switch(i){case"right":b="R";break;case"justify":b="J";break;case"center":b="C";break;case"left":default:b="L"}var m=0,v=[["^FO"+a,h],["^A"+g+u,f,d],["^FB"+c,r,p,b,m],["^FD"+l],["^FS"]]}else var v=[["^FO"+a,h],["^A"+g+u,f,d],["^FD"+l],["^FS"]];return v.map(function(t){return t.join(",")}).join("\n")+"\n"},scene.Text.prototype._toZpl=function(t){return this.toZplForText(t)},n.Text=scene.Text},{"../../config":1}],10:[function(t,e,n){"use strict";function o(t,e,n){for(var o=[],r=0;e>r;r++)for(var i=0;t>i;i++){var s=4*(t*r+i),a=.21*n[s+h]+.71*n[s+c]+.07*n[s+u];a+=(255-n[s+p])*(255-a)/255,o[s+h]=a,o[s+c]=a,o[s+u]=a,o[s+p]=n[s+p]}return o}function r(t,e,n){for(var o=[],r=0;a>r;r++)o[r]=0;for(var i=0;e>i;i++)for(var s=0;t>s;s++){var c=4*(t*i+s),u=Math.round(n[c+h]);o[u]++}return o}function i(t,e,n){for(var o=r(t,e,n),i=0,s=0;a>s;s++)i+=s*o[s];for(var h=0,c=0,u=0,p=0,l=0,f=t*e,d=0;a>d;d++)if(c+=o[d],0!=c){if(u=f-c,0==u)break;h+=d*o[d];var g=h/c,b=(i-h)/u,m=c*u*(g-b)*(g-b);m>p&&(p=m,l=d)}return l}function s(t,e,n){for(var r=o(t,e,n),s=i(t,e,r),a=[],l=0;e>l;l++)for(var f=0;t>f;f++){var d=4*(l*t+f);r[d]>s?(a[d+h]=255,a[d+c]=255,a[d+u]=255):(a[d+h]=0,a[d+c]=0,a[d+u]=0),a[d+p]=r[d+p]}return a}Object.defineProperty(n,"__esModule",{value:!0}),n.binarize=s;var a=256,h=0,c=1,u=2,p=3},{}],11:[function(t,e,n){"use strict";function o(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+t()+t()+t()+t()+t()+t()}function r(t){return parseInt(t,2).toString(16).toUpperCase()||""}function i(t,e,n){for(var o="",i=Math.ceil(t/8),s=0;e>s;s++){for(var a="",h=0,c=0;t>c;c++)a+=0==n[4*(t*s+c)+1]?"1":"0",a.length>7&&(o+=r(a.substring(0,4))+r(a.substring(4,8)),a="",h++);if(a.length>0){for(;a.length<8;)a+="0";o+=r(a.substring(0,4))+r(a.substring(4,8)),a="",h++}for(;h++<i;)o+=r("0000")+r("0000");o+="\n"}return i*e+","+i+","+o}function s(t,e,n){var o;"undefined"==typeof document?o=new Canvas(t,e):(o=document.createElement("canvas"),o.width=t,o.height=e);var r=new Image,s=new Promise(function(n,s){r.onload=function(){var s=o.getContext("2d");console.log("image size, target size",this.width,this.height,t,e),s.drawImage(r,0,0,this.width,this.height,0,0,t,e);var a=s.getImageData(0,0,t,e),c=a.data,u=i(t,e,h.binarize(t,e,c));o.remove(),n(u)},r.onerror=function(t){o.remove(),s(t)}});return r.crossOrigin="use-credentials",r.src=n,s}function a(t,e){return new Promise(function(n,r){s(Math.round(t.width),Math.round(t.height),e).then(function(e){var r=o(),i=[["~DG"+r,e],["^FO"+Math.round(t.left),Math.round(t.top)],["^XGR:"+r,1,1],["^PQ1"],["^FS"]],s=i.map(function(t){return t.join(",")}).join("\n")+"\n";n(s)},function(t){r(t)})})}Object.defineProperty(n,"__esModule",{value:!0}),n.getImageGrf=s,n.getGrfCommand=a;var h=t("./rgb-binarize")},{"./rgb-binarize":10}]},{},[2]);